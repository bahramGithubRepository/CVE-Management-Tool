package ui;

import java.awt.Dimension;
import java.awt.Font;
import java.awt.Window;

import javax.swing.JButton;
import javax.swing.JOptionPane;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.SwingUtilities;

import services.ServiceLayer;

public class AddNewProductView extends JPanel{

	JTextField text=new JTextField();
	JButton save=new JButton("Save");
	Font font = new Font("Arial", Font.PLAIN, 20);
	public String value=null;
	public AddNewProductView() {

		init();
	}
	private void init(){
		setPreferredSize(new Dimension(400, 100));
		text.setPreferredSize(new Dimension(150, 35));
		text.setFont(font);
		save.setPreferredSize(new Dimension(80, 35));
		save.setFont(font);
		add(text);add(save);
		save.addActionListener((a)->{
			if(text.getText().isEmpty()){
				JOptionPane.showMessageDialog(this, "Please enter a product name", "Error",
						JOptionPane.ERROR_MESSAGE);
				return;
			}
				
			ServiceLayer service=new ServiceLayer();
			String result=service.addNewProduct(text.getText());
			
			
			JOptionPane.showMessageDialog(this, result, "Okay",
				JOptionPane.INFORMATION_MESSAGE);
			if(result.contains("has been added successfully"))
				value=text.getText();
			closeWindoe();	
				});
	
	}
	
	private void closeWindoe() {
		Window win = SwingUtilities.getWindowAncestor(this);
		if (win != null) {
			win.dispose();
		}

	}
}
